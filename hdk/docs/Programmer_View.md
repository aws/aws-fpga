# AWS FPGA: Programmer's View of the Custom Logic

This document describes how an actual application running in Linux userspace would interface with the FPGA Custom Logic (CL) during runtime.

There are two parts required to work with AWS FPGA: Management and Runtime, and the next figure provides high level view of these components and how they relate to the underlying FPGA hardware.

![alt tag](./images/AWS_FPGA_Software_Overview.jpg)

1. **Management Interface**: required for loading/clearing an AFI, checking the status of an AFI, debug of the AFI, Emulated LEDs and Emulated DIP Switches. The management interface is provided in one of three options, one or more can be used concurrently:

  **\[A\]** As linux shell commands called [FPGA Management Tools](../../sdk/userspace/fpga_mgmt_tools/README.md).
  
  **\[B\]** As a C-library called [FPGA Management Lib](../../sdk/userspace/fpga_libs/fpga_mgmt/) to be compiled with the developer's C/C++ application.
  
  **\[C\]** Pre-integrated with [OpenCL runtime library](../../SDAccel)
  
2. **Runtime code**: required for reading/writing from/to the Custom Logic, handling interrupts, and using the DMA. This is provided by:
  
  **\[D\]** [FPGA PCIe Lib](../../sdk/userspace/fpga_libs/fpga_pci/) is a C-library used to access the FPGA memory space behind the AppPF PCIe BARs, from Linux application space like reading/writing to register space or passing messages. This library can be compiled and linked with the developer's C/C++ application.
  
  **\[E\]** A [DMA Interface](../../sdk/linux_kernel_drivers/edma/README.md) using standard POSIX API like open()/read()/write() to be used in any C/C++ application for data transfer using DMA. This DMA interface requires installing the [AWS EDMA kernel driver](../../sdk/linux_kernel_drivers/edma/edma_install.md) - marked as item **\[G\]**.
  
  **\[F\]** A [Userspace Interrupt/Event notification](../../sdk/linux_kernel_drivers/edma/user_defined_interrupts_README.md) using standard POSIX API like open() and poll(), to be used in any C/C++ application. This Interrupt/Event interface requires installing the [AWS EDMA kernel driver](../../sdk/linux_kernel_drivers/edma/edma_install.md) - marked as item **\[G\]**.
  
  **\[I\]** An [openCL ICD](https://wikipedia.org/wiki/OpenCL#Implementations) library that links with openCL runtime application, like the one generated by Xilinx' SDAccel. 
  

